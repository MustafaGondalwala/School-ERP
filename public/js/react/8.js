(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{233:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var n=a(0),l=a.n(n),r=a(2),c=a(6),o=a.n(c);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b(e);if(t){var l=b(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return m(this,a)}}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=l.a.lazy((function(){return a.e(1).then(a.bind(null,140))})),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,a,n,c=p(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).state={title:"",student_attendance:"",view_type:"",update_attendance:[],update_button:"Update Attendance",total_present:0,total_absent:0,total_leave:0,total_half_leave:0,total_none:0},t.stateChange=t.stateChange.bind(f(t)),t.updateTotalInputs=t.updateTotalInputs.bind(f(t)),t.changeSelectStatus=t.changeSelectStatus.bind(f(t)),t}return t=u,(a=[{key:"stateChange",value:function(e,t,a){this.setState(s({},e,t),a)}},{key:"updateTotalInputs",value:function(e){var t=0,a=0,n=0,l=0;e.map((function(e){switch(e.status){case 1:t+=1;break;case 2:a+=1;break;case 3:n+=1;break;case 4:break;case 5:l+=1}})),this.setState({total_leave:n,total_present:t,total_absent:a,total_none:l})}},{key:"componentDidMount",value:function(){var e="",t=this.props,a=t.view_type,n=t.student_attendance;e="fill"==a?"Fill Attendance":"View Attendance",this.stateChange("title",e),this.stateChange("student_attendance",n),this.stateChange("view_type",a),this.updateTotalInputs(n)}},{key:"changeSelectStatus",value:function(e,t){var a=this.state.student_attendance,n=e.target.value;a[t].status=n,this.stateChange("student_attendance",a);var l=this.state.update_attendance;l[t]=[a[t].id,a[t].status],this.stateChange("update_attendance",l)}},{key:"onSubmit",value:function(){var e=this;this.state.update_attendance,this.stateChange("update_button","Updating ..."),this.props.updateStudentAttendance(this.state.update_attendance).then((function(t){e.stateChange("update_button","Update Attendance"),e.stateChange("update_attendance",[]),o.a.fire("Done","Student Attendance Updated !!","success")})).catch((function(t){t.response&&422==t.response.status?o.a.fire("Validation Error","Please update Aleast One Student Attendance","warning"):o.a.fire("Error Occured","Error Occured. Please try later","error"),e.stateChange("update_button","Update Attendance")}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.student_attendance,c=t.view_type,o=t.update_button,u=this.state,i=u.total_present,d=u.total_absent,p=u.total_leave,m=u.total_none,f=u.total_half_leave,b=this.props.select_date,v=[{y:i,label:"Total Present"},{y:d,label:"Total Absent"},{y:p,label:"Total Leave"},{y:f,label:"Total Half Leave"},{y:m,label:"Total None Entry"}];return l.a.createElement(r.default,{title:a},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("label",null,l.a.createElement("h5",null,"Present Student:")),l.a.createElement("input",{type:"text",disabled:!0,value:i,className:"form-control"})),l.a.createElement("div",{className:"col"},l.a.createElement("label",null,l.a.createElement("h5",null,"Leave Student:")),l.a.createElement("input",{type:"text",disabled:!0,value:p,className:"form-control"})),l.a.createElement("div",{className:"col"},l.a.createElement("label",null,l.a.createElement("h5",null,"Absent Student:")),l.a.createElement("input",{type:"text",disabled:!0,value:d,className:"form-control"})),l.a.createElement("div",{className:"col"},l.a.createElement("label",null,l.a.createElement("h5",null,"Attendance Half Leave:")),l.a.createElement("input",{type:"text",disabled:!0,value:f,className:"form-control"})),l.a.createElement("div",{className:"col"},l.a.createElement("label",null,l.a.createElement("h5",null,"Attendance Pending:")),l.a.createElement("input",{type:"text",disabled:!0,value:m,className:"form-control"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table datatable"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"S.no"),l.a.createElement("th",null,"Roll No"),l.a.createElement("th",null,"Student Name"),l.a.createElement("th",null,"Father Name"),l.a.createElement("th",null,"Attendance"),l.a.createElement("th",null,"Checkbox"))),l.a.createElement("tbody",null,n&&n.map((function(t,a){var n;return l.a.createElement(y,(s(n={key:a,view_type:c,onChange:e.changeSelectStatus},"view_type",c),s(n,"index",a),s(n,"row",t),n))})))),"fill"==c&&l.a.createElement("button",{className:"btn btn-primary",onClick:function(t){return e.onSubmit()}},o))),l.a.createElement("div",{className:"row"},l.a.createElement("br",null),l.a.createElement("br",null),"view"==c&&l.a.createElement(h,{title:"Student Attendance for ".concat(b),filename:"student_attendance",type:"pie",dataPoints:v})))}}])&&i(t.prototype,a),n&&i(t,n),u}(n.Component),y=function(e){var t=e.view_type,a=e.index,n=e.row,r=e.onChange,c="view"===t;return l.a.createElement("tr",{key:a},l.a.createElement("td",null,a+1),l.a.createElement("td",null,n.student_info.roll_no),l.a.createElement("td",null,n.student_info.student_name),l.a.createElement("td",null,n.student_info.father_name),l.a.createElement("td",null,l.a.createElement("select",{disabled:c,onChange:function(e){return r(e,a)},value:n.status,className:"form-control"},l.a.createElement("option",{value:"1"},"Present"),l.a.createElement("option",{value:"2"},"Absent"),l.a.createElement("option",{value:"3"},"Leave"),l.a.createElement("option",{value:"4"},"Half Present"),l.a.createElement("option",{value:"5"},"None"))),l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox"})))}}}]);