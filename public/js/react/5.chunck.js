(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{356:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(2),u=a(1),s=a(3),o=a(7),c=a(6),i=a(5),m=a.n(i),d=a(37);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t,a){return t&&p(e.prototype,t),a&&p(e,a),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=g(e);if(t){var r=g(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v(this,a)}}function v(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){b(a,e);var t=k(a);function a(e){var n;return f(this,a),(n=t.call(this,e)).state={marksheet:"",row:"",marksheet_id:"",exam_type:"",studentDetails:""},n.updateMarksheet=n.updateMarksheet.bind(_(n)),n.updateStudentMarksheet=n.updateStudentMarksheet.bind(_(n)),n}return E(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.studentDetails,a=e.exam_type,n=e.setGradeTypeDispatch,r=e.gradeType;0==Object.keys(r).length&&n(),this.setState({studentDetails:t,exam_type:a})}},{key:"updateMarksheet",value:function(e){this.setState({studentDetails:e})}},{key:"submit",value:function(e,t){var a=this;this.setState({row:"",marksheet_id:""},(function(){a.setState({row:e,marksheet_id:t})}))}},{key:"updateStudentMarksheet",value:function(e,t,a,n){var r=this,l=this.props.exam_type;s.a.adminteacher.exam.marksheet.update_marksheet(e,t,a,l,n).then((function(e){var t=e.message,a=e.marksheet;m.a.fire("Success",t,"success"),r.setState({studentDetails:""}),r.updateMarksheet(a)})).catch((function(e){if(e.response){var t=e.response.status;422!=t&&400!=t||m.a.fire("Invalid Data","Data is Valid. Please Enter Correct Data","warning")}}))}},{key:"statusString",value:function(e){switch(e){case 1:return"Not Edit";case 2:return"Edited";case 3:return"Publish"}}},{key:"render",value:function(){var e=this,t=this.props,a=(t.submit,t.exam_type,t.gradeType),n=t.max_marks,s=this.state,o=s.row,c=s.marksheet_id,i=s.studentDetails;return console.log(o),r.a.createElement("span",null,o&&r.a.createElement(w,{max_marks:n,gradeType:a,submit:this.updateStudentMarksheet,marksheet_id:c,row:o}),r.a.createElement(l.default,{title:"Students Details"},r.a.createElement(u.o,null,r.a.createElement(u.p,null,r.a.createElement("th",null,"Sr no."),r.a.createElement("th",null,"Student Roll No"),r.a.createElement("th",null,"Student Name"),r.a.createElement("th",null,"Action"),r.a.createElement("th",null,"Status")),r.a.createElement("tbody",null,i.length>0&&i.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.student.roll_no),r.a.createElement("td",null,t.student.student_name),r.a.createElement("td",null,r.a.createElement(u.a,{primary:!0,sm:!0,onClick:function(){return e.submit(t,t.id)}},"Fill")),r.a.createElement("td",null,e.statusString(t.status)))}))))))}}]),a}(n.Component),w=function(e){b(a,e);var t=k(a);function a(e){var n;return f(this,a),(n=t.call(this,e)).state={marksheet:"",remark:""},n.onChange=n.onChange.bind(_(n)),n.onChangeRow=n.onChangeRow.bind(_(n)),n.submit=n.submit.bind(_(n)),n}return E(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.marksheet_id,n=t.row.remark;this.setState({remark:n}),s.a.adminteacher.exam.marksheet.get_individual(a).then((function(t){var a=t.marksheet;e.setState({marksheet:a})}))}},{key:"onChange",value:function(e,t){var a=e.target,n=a.name,r=a.value,l=this.state.marksheet;l[t][n]=r,this.setState({marksheet:l})}},{key:"submit",value:function(){var e=this.state,t=e.remark,a=e.marksheet,n=this.props.marksheet_id,r=this.props.row.student_id;this.props.submit(t,a,n,r)}},{key:"onChangeRow",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},a,n))}},{key:"render",value:function(){var e=this,t=this.props,a=t.row,n=t.gradeType,s=t.max_marks,o=this.state,i=o.marksheet,m=(o.remark,0),d="Exam  Marksheet: "+a.student.roll_no;return r.a.createElement(l.default,{title:d},r.a.createElement(c.default,null,r.a.createElement(u.c,{md:6,sm:4},r.a.createElement(u.d,null,r.a.createElement(u.e,null,"Student Name"),r.a.createElement(u.f,{value:a.student.student_name,disabled:!0}))),r.a.createElement(u.c,{md:6,sm:4},r.a.createElement(u.d,null,r.a.createElement(u.e,null,"Student Roll No"),r.a.createElement(u.f,{value:a.student.roll_no,disabled:!0}))),r.a.createElement(u.c,{md:6,sm:4},r.a.createElement(u.d,null,r.a.createElement(u.e,null,"Father Name"),r.a.createElement(u.f,{value:a.student.father_name,disabled:!0}))),r.a.createElement(u.c,{md:6,sm:4},r.a.createElement(u.d,null,r.a.createElement(u.e,null,"Father Contact No"),r.a.createElement(u.f,{value:a.student.father_contact_no1,disabled:!0})))),r.a.createElement("br",null),i?r.a.createElement("div",{className:"table_responsive"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Sr no."),r.a.createElement("th",null,"Subject"),r.a.createElement("th",null,"Total Marks"),r.a.createElement("th",null,"Grade"))),r.a.createElement("tbody",null,i.map((function(t,a){return m+=parseInt(t.total_marks),r.a.createElement(x,{key:a,gradeType:n,max_marks:s,onChange:e.onChange,index:a,row:t})}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement(u.f,{value:m,disabled:!0})),r.a.createElement("td",null,Object(u.u)(n,m,i.length*s)))))):r.a.createElement("h3",null,"Loading Marksheet ..."),r.a.createElement(c.default,null,r.a.createElement("button",{className:"btn btn-primary",onClick:this.submit},"Update")))}}]),a}(n.Component),x=function(e){var t=e.index,a=e.row,n=e.onChange,l=e.gradeType,s=e.max_marks;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,a.subject.subject_name),r.a.createElement("td",null,r.a.createElement("input",{type:"number",min:"0",name:"total_marks",onChange:function(e){return n(e,t)},value:a.total_marks||0,className:"form-control"})),r.a.createElement("td",null,Object(u.u)(l,a.total_marks,s)))};t.default=Object(o.b)((function(e){return{gradeType:e.gradeType}}),{setGradeTypeDispatch:d.b})(S)}}]);